"""
i18n.py - simple translation helper for QRGen

This module provides a tiny translation lookup used by the GUI.
"""

TRANSLATIONS = {
    "en": {
        "title": "QRGen",
        "choose_format_instruction": "Choose a format tab, fill the fields, then generate a QR code.",
        "tab_vcard": "vCard",
        "tab_url": "URL",
        "tab_text": "Plain Text",
        "tab_email": "Email",
        "tab_phone": "Phone",
        "tab_sms": "SMS",
        "tab_wifi": "Wi-Fi",
        "tab_event": "Event",
        "tab_geo": "Geolocation",
        "tab_applink": "App Link",
        "tab_payment": "Payment",
        "tab_mecard": "MeCard",
        "tab_settings": "Settings",
        "logo_optional": "Logo (optional)",
        "qr_color": "QR Color",
        "bg_color": "Background Color",
        "generate_vcard": "Generate vCard QR",
        "generate_url": "Generate URL QR",
        "generate_text": "Generate Text QR",
        "generate_mailto": "Generate Mailto QR",
        "generate_phone": "Generate Phone QR",
        "generate_sms": "Generate SMS QR",
        "generate_wifi": "Generate Wi-Fi QR",
        "generate_event": "Generate Event QR",
        "generate_geo": "Generate Geo QR",
        "generate_applink": "Generate App Link QR",
        "generate_payment": "Generate Payment QR",
        "generate_mecard": "Generate MeCard QR",
        "qr_size": "QR Size (px)",
        "error_correction": "Error Correction",
        "max_payload": "Max Payload Length (warn at)",
        "logo_section": "Logo",
        "enable_logo": "Enable Logo",
        "logo_preview": "Logo Preview",
        "logo_scale": "Logo Scale (fraction of QR)",
        "logo_opacity": "Logo Opacity",
        "logo_clip": "Logo Clip",
        "colours_gradient": "Colours & Gradient",
        "palette": "Palette",
        "transparent_bg": "Transparent Background",
        "foreground_color": "Foreground Color",
        "border": "Border (px)",
        "border_color": "Border Color",
        "corner_radius": "Corner Radius",
        "header_text": "Header Text",
        "footer_text": "Footer Text",
        "header_font_size": "Header Font Size",
        "footer_font_size": "Footer Font Size",
        "font": "Font",
        "bold": "Bold",
        "align": "Alignment",
        "align_left": "Left",
        "align_center": "Center",
        "align_right": "Right",
        "use_gradient": "Use Gradient",
        "enable_gradient": "Enable Gradient",
        "gradient_palette": "Gradient Palette",
        "gradient_target": "Gradient Target",
        "gradient_from": "Gradient From",
        "gradient_to": "Gradient To",
        "gradient_angle": "Gradient Angle (deg)",
        "appearance": "Appearance",
        "module_shape": "Module Shape",
        "pattern": "Pattern",
        "pattern_strength": "Pattern Strength",
        "qr_preview": "QR Code Preview",
        "payload_preview": "Payload Preview",
        "language": "Language",
        "tab_url": "URL",
        "label_url": "URL",
        "placeholder_url": "https://example.com",
        "label_text": "Text",
        "label_to": "To",
        "label_subject": "Subject",
        "label_body": "Body",
        "label_phone_number": "Phone Number",
        "label_message": "Message",
        "label_ssid": "SSID",
        "label_auth_type": "Auth Type",
        "label_password": "Password",
        "label_hidden_network": "Hidden Network",
        "label_summary": "Summary",
        "label_start": "Start (YYYYMMDD or YYYYMMDDTHHMMSS)",
        "label_end_optional": "End (optional)",
        "label_location": "Location",
        "label_description": "Description",
        "label_latitude": "Latitude",
        "label_longitude": "Longitude",
        "label_label_optional": "Label (optional)",
        "label_app_url_fallback": "App URL / Fallback",
        "label_address": "Address",
        "label_amount_optional": "Amount (optional)",
        "label_name": "Name",
        "Customization": "Customization",
        "Border": "Border",
        "Color": "Color",
        "Gradient": "Gradient",
        "Appearance": "Appearance",
        "Text": "Text",
        "Header": "Header",
        "Footer": "Footer",
        "Files": "Files",
        "label_phone": "Phone",
        "label_email": "Email",
        "label_organization": "Organization",
        "label_note": "Note",
        "vcard_fn": "Full Name",
        "vcard_email_work": "Email - Work",
        "vcard_email_home": "Email - Home",
        "vcard_title": "Job Title",
        "vcard_role": "Role",
        "vcard_bday": "Birthday",
        "vcard_adr_home": "Home Address",
        "vcard_tel_cell": "Phone - Mobile",
        "vcard_tel_work": "Phone - Work",
        "vcard_tel_home": "Phone - Home",
        "vcard_tel_fax": "Fax Number",
        "vcard_url": "Website",
        "vcard_tz": "Timezone",
        "vcard_org": "Organization",
        "vcard_note": "Note",
        "lang_en": "English",
        "lang_af": "Afrikaans",
        "lang_es": "Español",
        "save_settings": "Save Settings",
        "reset_settings": "Reset Settings",
        "settings_test_qr": "Settings Test QR",
        "settings_saved": "Settings saved",
        "settings_reset": "Settings reset",
        "settings_status": "Settings status",
        "download_svg": "Download SVG",
        "download_batch": "Download Batch (ZIP)",
        "download_template": "Download CSV Template",
        "upload_csv": "Upload CSV for Batch",
        "ttf_suffix": "(TTF)",
        "err_empty_payload": "Error: payload is empty",
    },
    "af": {
        "title": "QRGen",
        "choose_format_instruction": "Kies 'n formaat-oortjie, vul die velde in, en genereer 'n QR-kode.",
        "tab_vcard": "vCard",
        "tab_url": "URL",
        "tab_text": "Platte Teks",
        "tab_email": "E-pos",
        "tab_phone": "Telefoon",
        "tab_sms": "SMS",
        "tab_wifi": "Wi-Fi",
        "tab_event": "Gebeurtenis",
        "tab_geo": "Geolokasie",
        "tab_applink": "App Skakel",
        "tab_payment": "Betaling",
        "tab_mecard": "MeCard",
        "tab_settings": "Instellings",
        "logo_optional": "Logo (opsioneel)",
        "qr_color": "QR-kleur",
        "bg_color": "Agtergrondkleur",
        "generate_vcard": "Genereer vCard QR",
        "generate_url": "Genereer URL QR",
        "generate_text": "Genereer Teks QR",
        "generate_mailto": "Genereer Mailto QR",
        "generate_phone": "Genereer Telefoon QR",
        "generate_sms": "Genereer SMS QR",
        "generate_wifi": "Genereer Wi-Fi QR",
        "generate_event": "Genereer Gebeurtenis QR",
        "generate_geo": "Genereer Geo QR",
        "generate_applink": "Genereer App Skakel QR",
        "generate_payment": "Genereer Betaling QR",
        "generate_mecard": "Genereer MeCard QR",
        "qr_size": "QR-grootte (px)",
        "error_correction": "Foutkorreksie",
        "max_payload": "Maksimum ladinglengte (waarsku by)",
        "logo_section": "Logo",
        "enable_logo": "Skakel Logo In",
        "logo_preview": "Logo Voorskou",
        "logo_scale": "Logo Skaal (fraksie van QR)",
        "logo_opacity": "Logo Deursigtigheid",
        "logo_clip": "Logo Knip",
        "colours_gradient": "Kleure & Verloop",
        "palette": "Palet",
        "foreground_color": "Voorgrondkleur",
        "border": "Rand (px)",
        "border_color": "Rand Kleur",
        "corner_radius": "Hoek Radius",
        "header_text": "Kopstuk Teks",
        "footer_text": "Voet Teks",
        "header_font_size": "Kopstuk Lettergrootte",
        "footer_font_size": "Voet Lettergrootte",
        "font": "Font",
        "bold": "Vet",
        "align": "Uitlijning",
        "align_left": "Links",
        "align_center": "Sentrum",
        "align_right": "Regs",
        "use_gradient": "Gebruik Verloop",
        "enable_gradient": "Skakel Verloop In",
        "gradient_palette": "Verloop-palet",
        "gradient_target": "Verloop Teiken",
        "gradient_from": "Verloop Van",
        "gradient_to": "Verloop Na",
        "gradient_angle": "Verloop Hoek (°)",
        "appearance": "Voorkoms",
        "module_shape": "Moduul Vorm",
        "pattern": "Patroon",
        "pattern_strength": "Patroon Sterkte",
        "qr_preview": "QR-kode Voorskou",
        "payload_preview": "Lading Voorskou",
        "language": "Taal",
        "tab_url": "URL",
        "label_url": "URL",
        "placeholder_url": "https://example.com",
        "label_text": "Teks",
        "label_to": "Aan",
        "label_subject": "Onderwerp",
        "label_body": "Boodskap",
        "label_phone_number": "Telefoonnommer",
        "label_message": "Boodskap",
        "label_ssid": "SSID",
        "label_auth_type": "Geskrewe Tipe",
        "label_password": "Wagwoord",
        "label_hidden_network": "Gekruipte netwerk",
        "label_summary": "Opsomming",
        "label_start": "Begin (YYYYMMDD of YYYYMMDDTHHMMSS)",
        "label_end_optional": "Einde (opsioneel)",
        "label_location": "Ligging",
        "label_description": "Beskrywing",
        "label_latitude": "Breedtegraad",
        "label_longitude": "Lengtegraad",
        "label_label_optional": "Etiket (opsioneel)",
        "label_app_url_fallback": "App URL / Fallback",
        "label_address": "Adres",
        "label_amount_optional": "Bedrag (opsioneel)",
        "label_name": "Naam",
        "Customization": "Aanpassing",
        "Border": "Rand",
        "Color": "Kleur",
        "Gradient": "Verloop",
        "Appearance": "Voorkoms",
        "Text": "Teks",
        "Header": "Kopstuk",
        "Footer": "Voetskrif",
        "Files": "Lêers",
        "label_phone": "Telefoon",
        "label_email": "E-pos",
        "label_organization": "Organisasie",
        "label_note": "Nota",
        "lang_en": "Engels",
        "lang_af": "Afrikaans",
        "lang_es": "Spaans",
        "save_settings": "Stoor Instellings",
        "reset_settings": "Herstel Instellings",
        "settings_test_qr": "Instellings Toets QR",
        "settings_saved": "Instellings gestoor",
        "settings_reset": "Instellings herstel",
        "settings_status": "Instellings status",
        "download_svg": "Laai SVG af",
        "download_batch": "Laai Bondel af (ZIP)",
        "upload_csv": "Laai CSV op vir Bondel",
    },
    "es": {
        "title": "QRGen",
        "choose_format_instruction": "Elige una pestaña de formato, completa los campos y luego genera un código QR.",
        "tab_vcard": "vCard",
        "tab_url": "URL",
        "tab_text": "Texto Plano",
        "tab_email": "Correo",
        "tab_phone": "Teléfono",
        "tab_sms": "SMS",
        "tab_wifi": "Wi-Fi",
        "tab_event": "Evento",
        "tab_geo": "Geolocalización",
        "tab_applink": "Enlace de App",
        "tab_payment": "Pago",
        "tab_mecard": "MeCard",
        "tab_settings": "Ajustes",
        "logo_optional": "Logo (opcional)",
        "qr_color": "Color QR",
        "bg_color": "Color de fondo",
        "generate_vcard": "Generar vCard QR",
        "generate_url": "Generar URL QR",
        "generate_text": "Generar Texto QR",
        "generate_mailto": "Generar Mailto QR",
        "generate_phone": "Generar Teléfono QR",
        "generate_sms": "Generar SMS QR",
        "generate_wifi": "Generar Wi-Fi QR",
        "generate_event": "Generar Evento QR",
        "generate_geo": "Generar Geo QR",
        "generate_applink": "Generar Enlace App QR",
        "generate_payment": "Generar Pago QR",
        "generate_mecard": "Generar MeCard QR",
        "qr_size": "Tamaño QR (px)",
        "error_correction": "Corrección de errores",
        "max_payload": "Longitud máxima de carga (advertir en)",
        "logo_section": "Logo",
        "enable_logo": "Habilitar Logo",
        "logo_preview": "Vista previa del Logo",
        "logo_scale": "Escala del Logo (fracción del QR)",
        "logo_opacity": "Opacidad del Logo",
        "logo_clip": "Recorte del Logo",
        "colours_gradient": "Colores y Degradado",
        "use_gradient": "Usar Degradado",
        "enable_gradient": "Habilitar Degradado",
        "gradient_palette": "Paleta de Degradado",
        "gradient_target": "Objetivo del Degradado",
        "gradient_from": "Degradado Desde",
        "gradient_to": "Degradado Hasta",
        "gradient_angle": "Ángulo del Degradado (°)",
        "appearance": "Apariencia",
        "module_shape": "Forma del Módulo",
        "pattern": "Patrón",
        "pattern_strength": "Fuerza del Patrón",
        "qr_preview": "Vista previa del QR",
        "payload_preview": "Vista previa de la carga",
        "language": "Idioma",
        "tab_url": "URL",
        "label_url": "URL",
        "placeholder_url": "https://example.com",
        "label_text": "Texto",
        "label_to": "Para",
        "label_subject": "Asunto",
        "label_body": "Cuerpo",
        "label_phone_number": "Número de teléfono",
        "label_message": "Mensaje",
        "label_ssid": "SSID",
        "label_auth_type": "Tipo de autenticación",
        "label_password": "Contraseña",
        "label_hidden_network": "Red oculta",
        "label_summary": "Resumen",
        "label_start": "Inicio (YYYYMMDD o YYYYMMDDTHHMMSS)",
        "label_end_optional": "Fin (opcional)",
        "label_location": "Ubicación",
        "label_description": "Descripción",
        "label_latitude": "Latitud",
        "label_longitude": "Longitud",
        "label_label_optional": "Etiqueta (opcional)",
        "label_app_url_fallback": "URL de la App / Fallback",
        "label_address": "Dirección",
        "label_amount_optional": "Cantidad (opcional)",
        "label_name": "Nombre",
        "Customization": "Personalización",
        "Border": "Borde",
        "Color": "Color",
        "Gradient": "Degradado",
        "Appearance": "Apariencia",
        "Text": "Texto",
        "Header": "Encabezado",
        "Footer": "Pie de página",
        "Files": "Archivos",
        "label_phone": "Teléfono",
        "label_email": "Correo",
        "label_organization": "Organización",
        "label_note": "Nota",
        "vcard_fn": "Nombre Completo",
        "vcard_email_work": "Correo del Trabajo",
        "vcard_email_home": "Correo Personal",
        "vcard_title": "Título del Puesto",
        "vcard_role": "Rol",
        "vcard_bday": "Cumpleaños",
        "vcard_adr_home": "Dirección de Casa",
        "vcard_tel_cell": "Teléfono Móvil",
        "vcard_tel_work": "Teléfono del Trabajo",
        "vcard_tel_home": "Teléfono de Casa",
        "vcard_tel_fax": "Fax",
        "vcard_url": "Sitio Web",
        "vcard_tz": "Zona Horaria",
        "vcard_org": "Organización",
        "vcard_note": "Nota",
        "lang_en": "Inglés",
        "lang_af": "Afrikaans",
        "lang_es": "Español",
        "palette": "Paleta",
        "transparent_bg": "Fondo Transparente",
        "foreground_color": "Color de primer plano",
        "border": "Borde (px)",
        "border_color": "Color de borde",
        "corner_radius": "Radio de esquina",
        "header_text": "Texto de encabezado",
        "footer_text": "Texto de pie",
        "header_font_size": "Tamaño de fuente del encabezado",
        "footer_font_size": "Tamaño de fuente del pie",
        "font": "Fuente",
        "bold": "Negrita",
        "align": "Alineación",
        "align_left": "Izquierda",
        "align_center": "Centro",
        "align_right": "Derecha",
        "save_settings": "Guardar Ajustes",
        "reset_settings": "Reiniciar Ajustes",
        "settings_test_qr": "Ajustes del Test QR",
        "settings_saved": "Ajustes guardados",
        "settings_reset": "Ajustes reiniciados",
        "settings_status": "Estado de ajustes",
        "download_svg": "Descargar SVG",
        "download_batch": "Descargar Lote (ZIP)",
        "download_template": "Descargar Plantilla CSV",
        "upload_csv": "Subir CSV para Lote",
    },
}


def t(key: str, lang: str = "en") -> str:
    """Return translated string for `key` in `lang`.

    Falls back to English then to the key itself.
    """
    if lang in TRANSLATIONS and key in TRANSLATIONS[lang]:
        return TRANSLATIONS[lang][key]
    if "en" in TRANSLATIONS and key in TRANSLATIONS["en"]:
        return TRANSLATIONS["en"][key]
    return key


LANG_NAMES = {
    "en": "English",
    "af": "Afrikaans",
    "es": "Español",
}


def available_languages():
    """Return list of language codes (sorted) available for selection."""
    return sorted([k for k in TRANSLATIONS.keys()])


def localized_language_choices(display_lang: str):
    """Return (choices_list, display_to_code, code_to_display) for the given display language.

    choices_list is a list like ['English (en)', 'Afrikaans (af)'] localized to display_lang.
    """
    codes = available_languages()
    code_to_display = {}
    display_to_code = {}
    choices = []
    for c in codes:
        key = f"lang_{c}"
        name = t(key, display_lang)
        label = f"{name} ({c})"
        choices.append(label)
        code_to_display[c] = label
        display_to_code[label] = c
    return choices, display_to_code, code_to_display

